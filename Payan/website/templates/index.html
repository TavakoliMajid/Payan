{% load static %}
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پایان | خرید و فروش لباس‌های دست دوم</title>
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/dana-font@v1.0.1/dist/font-face.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        body, html {
            margin: 0;
            padding: 0;
            font-family: 'Dana', sans-serif;
            background-color: #F8F8F2;
            color: #3E6259;
            text-align: center;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 30px;
            background: #ffffff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            position: relative;
        }

        .top-bar .logo {
            font-size: 22px;
            font-weight: bold;
            color: #3E6259;
            cursor: pointer;
        }

        .top-bar .menu {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .menu a {
            text-decoration: none;
            color: #3E6259;
            font-size: 16px;
        }

        .menu a:hover {
            color: #F4D06F;
        }

        .hero {
            background-color: rgb(78, 86, 73);
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            color: white;
            font-size: 24px;
            font-weight: bold;
            padding-left: 30px;
        }

        .logo-large {
            margin-top: -30px;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            margin: 20px auto;
            max-width: 800px;
            transition: all 0.3s ease-in-out;
            position: relative;
            gap: 0;
        }

        .button-box {
            flex: 1;
            background-color: rgb(78, 86, 73);
            color: white;
            text-align: center;
            padding: 160px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease-in-out;
            position: relative;
            margin: 0;
        }

        .button-box:first-child {
            border-radius: 20px 0 0 20px;
        }

        .button-box:last-child {
            border-radius: 0 20px 20px 0;
        }

        .button-box:hover {
            transform: scale(1.1);
        }

        .buttons-container:hover .button-box:not(:hover) {
            transform: scale(0.9);
        }

        .modal {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background: rgba(210, 180, 140, 0.9);
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border-radius: 10px;
            z-index: 1000;
            width: 100%;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.3s ease-out;
        }

        .modal.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .auth-modal {
            display: none;
            position: absolute;
            top: 100%;
            right: auto;
            left: 50%;
            transform: translateX(50%);
            background: rgba(210, 180, 140, 0.9);
            padding: 20px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border-radius: 10px;
            z-index: 1000;
            width: 300px;
            opacity: 0;
        }

        .auth-modal.active {
            display: block;
            animation: slideDown 0.4s ease-out forwards;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .filter-options {
            display: flex;
            justify-content: space-around;
            margin-top: 10px;
        }

        .filter-options button {
            background: none;
            border: none;
            cursor: pointer;
        }

        .filter-options img {
            width: 50px;
            height: 50px;
        }

        .modal button, .auth-modal button {
            margin-top: 10px;
            padding: 8px 12px;
            border: none;
            background: rgb(78, 86, 73);
            color: white;
            cursor: pointer;
            border-radius: 5px;
        }

        .modal button:hover, .auth-modal button:hover {
            background: #F4D06F;
            color: rgb(78, 86, 73);
        }

        .auth-modal input {
            width: 100%;
            padding: 8px;
            margin: 10px 0;
            border: 1px solid rgb(78, 86, 73);
            border-radius: 5px;
        }

        .what-is-button {
            background-color: #D2B48C;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 20px;
            cursor: pointer;
            margin: 20px 50px 20px auto;
            display: block;
            animation: shakeBlink 1.5s infinite;
        }

        @keyframes shakeBlink {
            0% { transform: translateX(0); opacity: 1; }
            25% { transform: translateX(-5px); opacity: 0.7; }
            50% { transform: translateX(5px); opacity: 1; }
            75% { transform: translateX(-5px); opacity: 0.7; }
            100% { transform: translateX(0); opacity: 1; }
        }

        .typed-text {
            display: none;
            margin: 0 50px 20px auto;
            font-size: 18px;
            text-align: right;
        }

        footer {
            background-color: rgb(78, 86, 73);
            color: white;
            padding: 20px;
            margin-top: auto;
        }

        .hidden {
            display: none;
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="logo" onclick="shakeScreen()">Payan.com</div>
        <div class="menu">
            <a href="#" id="authButton" onclick="toggleAuthModal(event)">ثبت‌نام / ورود</a>
            <a href="#"><i class="fas fa-shopping-cart"></i></a>
        </div>
    </div>

    <div class="hero">
        پایان هر داستان، شروع داستان دیگر
    </div>

    <div class="logo-large">
        <img src="{% static 'images/payan-logo.png' %}" alt="Payan Logo" width="300">
    </div>

    <div class="buttons-container">
        <div class="button-box" onclick="toggleModal('buyModal')">خرید
            <div class="modal" id="buyModal">
                <h3>انتخاب تنظیمات خرید</h3>
                <div class="filter-options" id="genderOptionsBuy">
                    <button onclick="selectGender('male', 'buy')"><img src="{% static 'images/male.png' %}" alt="مردانه"></button>
                    <button onclick="selectGender('female', 'buy')"><img src="{% static 'images/female.png' %}" alt="زنانه"></button>
                </div>
                <div class="filter-options hidden" id="styleOptionsBuy">
                    <button onclick="selectStyle('formal', 'buy')"><img src="{% static 'images/formal.png' %}" alt="رسمی"></button>
                    <button onclick="selectStyle('casual', 'buy')"><img src="{% static 'images/casual.png' %}" alt="غیررسمی"></button>
                </div>
                <button onclick="toggleModal('buyModal')">بستن</button>
            </div>
        </div>
        <div class="button-box" onclick="toggleModal('sellModal')">فروش
            <div class="modal" id="sellModal">
                <h3>انتخاب تنظیمات فروش</h3>
                <div class="filter-options" id="genderOptionsSell">
                    <button onclick="selectGender('male', 'sell')"><img src="{% static 'images/male.png' %}" alt="مردانه"></button>
                    <button onclick="selectGender('female', 'sell')"><img src="{% static 'images/female.png' %}" alt="زنانه"></button>
                </div>
                <div class="filter-options hidden" id="styleOptionsSell">
                    <button onclick="selectStyle('formal', 'sell')"><img src="{% static 'images/formal.png' %}" alt="رسمی"></button>
                    <button onclick="selectStyle('casual', 'sell')"><img src="{% static 'images/casual.png' %}" alt="غیررسمی"></button>
                </div>
                <button onclick="toggleModal('sellModal')">بستن</button>
            </div>
        </div>
    </div>

    <button class="what-is-button" onclick="showTypedText()">پایان چیست؟</button>
    <div class="typed-text" id="typedText">تو کمدت براز لباسهابي شده كه ديكه نمى يوشى؟ يا شايد دنبال لباس هاى باكيفيت و خوش قيمت هستى؟ توى بايان، ما اين دو تا نياز رو به هم وصل مى كنيم!
ما اينجا هستيم تابهت كمك كنيم لباسهاى دست دوم ولى سالم و تميزت رو بفروشى و بهشون يه زندكى جديد بدى. از اون طرف، اكر دنبال لباس هاى خوش استايل و مقرون به صرفه اى، مى تونى توى بايان كلى انتخاب عالى بيدا كنى!
هدف ما ساده ست: يه خريد هوشمندانه، يايدار و دوستدار محيط زيست. با هر خريد يا فروشى كه توى يايان انجام مى دى، نه تنها به خودت و كيف يولت لطف مى كنى، بلكه كمك مى كنى لباسها به جاى تلنبار شدن يا دور ريخته شدن، دوباره استفاده بشن.
بس اكَه يه لباس توى كمدت داره خاى مى خوره، يادت باشه كه هر يايان شروع يه داستان دیگریست</div>

    <div class="auth-modal" id="authModal">
        <div id="initialStep">
            <h3>ورود / ثبت‌نام</h3>
            <input type="text" id="usernameEmail" placeholder="ایمیل یا نام کاربری">
            <button onclick="checkUser()">بررسی</button>
        </div>
        <div id="optionsStep" style="display: none;">
            <button onclick="showSignup()">ثبت‌نام</button>
            <button onclick="continueAsGuest()">میهمان</button>
        </div>
        <div id="loginStep" style="display: none;">
            <h3>ورود</h3>
            <button onclick="submitLogin()">ورود</button>
        </div>
        <div id="signupStep" style="display: none;">
            <h3>ثبت‌نام</h3>
            <input type="text" id="firstName" placeholder="نام">
            <input type="text" id="lastName" placeholder="نام خانوادگی">
            <input type="tel" id="phone" placeholder="شماره تلفن">
            <input type="email" id="signupEmail" placeholder="ایمیل">
            <button onclick="submitSignup()">ثبت</button>
        </div>
    </div>

    <footer>
        <p>© 2025 Payan.com - تمامی حقوق محفوظ است</p>
    </footer>

    <script>
        let userInput = '';
        let selectedGender = '';
        let selectedStyle = '';
        let currentType = '';

        function toggleModal(modalId) {
            let modal = document.getElementById(modalId);
            modal.classList.toggle('active');
            currentType = modalId === 'buyModal' ? 'buy' : 'sell';
            selectedGender = '';
            selectedStyle = '';
            resetOptions();

            // Close other modal if open
            const otherModalId = modalId === 'buyModal' ? 'sellModal' : 'buyModal';
            document.getElementById(otherModalId).classList.remove('active');
        }

        function resetOptions() {
            const type = currentType;
            const genderOptions = document.getElementById(`genderOptions${type.charAt(0).toUpperCase() + type.slice(1)}`);
            const styleOptions = document.getElementById(`styleOptions${type.charAt(0).toUpperCase() + type.slice(1)}`);

            genderOptions.querySelectorAll('button').forEach(button => {
                button.style.display = 'inline-block';
            });
            styleOptions.classList.add('hidden');
        }

        function selectGender(gender, type) {
            selectedGender = gender;
            const genderOptions = document.getElementById(`genderOptions${type.charAt(0).toUpperCase() + type.slice(1)}`);
            const styleOptions = document.getElementById(`styleOptions${type.charAt(0).toUpperCase() + type.slice(1)}`);

            genderOptions.querySelectorAll('button').forEach(button => {
                if (!button.querySelector('img').alt.includes(gender === 'male' ? 'مردانه' : 'زنانه')) {
                    button.style.display = 'none';
                }
            });

            styleOptions.classList.remove('hidden');
        }

        function selectStyle(style, type) {
            selectedStyle = style;
            if (selectedGender && selectedStyle) {
                if (type === 'buy') {
                    window.location.href = `/buy?gender=${selectedGender}&style=${selectedStyle}`;
                } else if (type === 'sell') {
                    window.location.href = `/sell?gender=${selectedGender}&style=${selectedStyle}`;
                }
                toggleModal(`${type}Modal`);
            }
        }

        function toggleAuthModal(event) {
            event.preventDefault();
            let modal = document.getElementById('authModal');
            let button = document.getElementById('authButton');
            let buttonRect = button.getBoundingClientRect();

            modal.classList.toggle('active');
            if (modal.classList.contains('active')) {
                modal.style.left = `${buttonRect.left}px`;
                modal.style.transform = 'none';
                document.getElementById('initialStep').style.display = 'block';
                document.getElementById('optionsStep').style.display = 'none';
                document.getElementById('loginStep').style.display = 'none';
                document.getElementById('signupStep').style.display = 'none';
            }
        }

        function checkUser() {
            userInput = document.getElementById('usernameEmail').value;
            const userExists = false;
            document.getElementById('initialStep').style.display = 'none';
            if (userExists) {
                document.getElementById('loginStep').style.display = 'block';
            } else {
                document.getElementById('optionsStep').style.display = 'block';
            }
        }

        function showSignup() {
            document.getElementById('optionsStep').style.display = 'none';
            document.getElementById('signupStep').style.display = 'block';
            if (userInput.includes('@')) {
                document.getElementById('signupEmail').value = userInput;
            }
        }

        function submitLogin() {
            alert('ورود موفقیت‌آمیز');
            toggleAuthModal();
        }

        function submitSignup() {
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('signupEmail').value;
            alert(`ثبت‌نام موفقیت‌آمیز: ${firstName} ${lastName}`);
            toggleAuthModal();
        }

        function continueAsGuest() {
            alert('ادامه به عنوان میهمان');
            toggleAuthModal();
        }

        function shakeScreen() {
            document.body.style.animation = 'shake 0.5s';
            setTimeout(() => {
                document.body.style.animation = '';
            }, 500);
        }

        function showTypedText() {
            const textElement = document.getElementById('typedText');
            textElement.style.display = 'block';
            let text = textElement.textContent;
            textElement.textContent = '';
            let i = 0;
            function type() {
                if (i < text.length) {
                    textElement.textContent += text.charAt(i);
                    i++;
                    setTimeout(type, 100);
                }
            }
            type();
        }
    </script>
</body>
</html>